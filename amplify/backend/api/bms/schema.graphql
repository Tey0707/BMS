
type User
  @model
  @auth(
    rules: [
      { allow: private, operations: [read, create, delete, update] }
      { allow: owner, operations: [read, create, delete, update] }
      { allow: public, operations: [read], provider: apiKey }
    ]
  ) {

  id: ID!

  # Basic User Info
  username: String!
  phone: AWSPhone
  role: String! # Admin, Staff, Resident, Official

  # Profile
  firstName: String
  middleName: String
  lastName: String
  suffix: String

  # Address
  barangay: String
  city: String
  province: String

  # Audit
  createdAt: AWSDateTime
  updatedAt: AWSDateTime

  # Relationship
  residents: [Resident] @hasMany(indexName: "byUser", fields: ["id"])
}


type Resident
  @model
  @auth(
    rules: [
      { allow: private, operations: [read, create, delete, update] }
      { allow: owner, operations: [read, create, delete, update] }
      { allow: public, operations: [read], provider: apiKey }
    ]
  ) {

  id: ID!

  # Foreign Key to User
  userID: ID @index(name: "byUser")

  # Optional foreign key to BarangayOfficial
  officialID: ID @index(name: "byOfficial")

  # Basic Information
  firstName: String
  middleName: String
  lastName: String
  suffix: String
  gender: String
  dateOfBirth: AWSDate

  # Contact
  email: AWSEmail
  phone: AWSPhone

  # Address
  houseNumber: String
  street: String
  purok: String
  sitio: String
  barangay: String
  city: String
  province: String
  postalCode: String

  # Residency Information
  residentIDNumber: String
  householdId: ID
  isHeadOfFamily: Boolean

  # Additional Info
  occupation: String
  civilStatus: String
  nationality: String

  # Audit
  createdBy: String
  updatedBy: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

################################################################################
# BARANGAY OFFICIAL MODEL
################################################################################

type OfficialPosition  @model
  @auth(
    rules: [
      { allow: private, operations: [read, create, delete, update] }
      { allow: owner, operations: [read, create, delete, update] }
      { allow: public, operations: [read], provider: apiKey }
    ]
  ) {
  id: ID!
  position: String
  description: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type BarangayOfficial
  @model
  @auth(
    rules: [
      { allow: private, operations: [read, create, delete, update] }
      { allow: owner, operations: [read, create, delete, update] }
      { allow: public, operations: [read], provider: apiKey }
    ]
  ) {

  id: ID!

  # Optional link to Resident
  residentID: ID @index(name: "byResident")

  # Official Information
  position: String
  termStart: AWSDate
  termEnd: AWSDate
  isActive: Boolean

  # Additional
  committee: String  # e.g., Peace & Order, Appropriations, etc.
  remarks: String

  # Audit
  createdBy: String
  updatedBy: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}
